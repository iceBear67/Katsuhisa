# 配置文件

配置文件，是程序运行时采用的参数来源。

举一个例子：

>  我有一个让NullCat女装的程序，点击一次他就会自动生产一次女装

女装的方案多种多样。即使我们可以在控制台手动输入方案，但也不能每次开服都来一次。

对于这种情况，便可以使用配置文件指定参数接着让这个程序自动读取。

## 怎么读

配置文件是设计给人类读写的，所以不会太难。

我们一般只会遇到三种配置文件格式：

1. YAML
2. JSON
3. Properties

(排序是常用度升序

但在这之前，我们需要先明确一些概念。

# 键，值，集合，Path，OMG

程序读取配置文件并不会牛逼到自我理解配置文件内容然后自动填参数，要真是这样那就太 :cow: 了

事实上，在配置文件中存在单向一一对应的关系（即键(Key) -> 值(Value)）。这很好理解，举个例子

> 目的：我要读取NC是不是男的
>
> 动作：读取配置文件中的" NC性别 "
>
> 结果：返回 "是"
>
> 读者可以在此思考一下，键值分别是什么。

## 值

键可以只是一串文本，但是值不一样，值可以是别的。

通常，值可以用来描述这些东西：

- 文本 - 用双引号围起来 (xx: "hello world")  *文本有时候没有围起来，您应该围起来。*

- 数字 - 就是数字

- 布尔 - 啥玩意 - 用于描述真或假 - 通常做开关 (isLxnsNb: true)

  注意：布尔**只有**两个值: `true` 或 `false`

- 集合/List/Array - 用于描述一组相同类型的数据

## Path

假设这里有这样一个配置文件，用于描述NC的女装和身体信息，有两种可能。

1.

```
注意： 该配置文件仅为读者理解用
NC女装 {
  癖好: XX
  平时穿: XX
  裙摆: XX
  上衣: XX
  ....
}
NC倾向 {
 玩游戏: XX
 吃什么: XX
}
```

2.

```
NC女装癖好: XX
NC女装平时穿: XX
NC女装裙摆： XX
NC女装上衣： XX
NC玩游戏倾向：XX
NC倾向吃什么：XX
```

看得出来，方法1比方法2要明了，清晰。

并且，实际上方法 2 可能会是乱序排列，想要像是方法 1 一样修改一类数据就更麻烦了。

像是方法 1 中的值，他的类型在上文值类型内没有提及过，且长得也像个"子"配置文件..那么我们把它叫做`选区`吧。

那么，如何描述选区内的键位置呢？

我们这样描述: `选区的键名.键名`。这很好理解，还是用上文的示例，接着举例子。

```
NC女装 {
  癖好: XX  (= NC女装.癖好)
  平时穿: XX (= NC女装.平时穿)
  裙摆: XX (= NC女装.裙摆)
  上衣: XX (= NC女装.上衣)
  ....
}
NC倾向 {
 玩游戏: XX (= NC倾向.玩什么)
 吃什么: XX (= NC倾向.吃什么)
}
```

### 集合

```
NC的任务单: ["吃饭",“睡觉","社保"]
```

我们想描述一个元素的位置，只需要使用`键名[元素位置]`即可。不过要注意的是，位置从0开始数哦。

例如：`NC的任务单[1] = 睡觉`

### 小例题

> 试一试:
>
> A {
>
> B {
>
> ​    C: ["HI"]
>
> }
>
> }
>
> 请尝试描述 HI 的位置

了解了基础概念后，我们理解几种描述这些概念的格式即可。

## Properties

文件扩展名为 `properties`

Properties非常简单，它使用`Key=Value`的方式指定键值。

例如 `eula.txt` 中的:

`eula=true` 此时键为eula 值为true

Properties 不能描述复杂的结构，甚至数组。

## YAML

文件扩展名为 `yml`

YAML 也很简单，但它对格式非常严格。

他使用`Key: Value`的方式指定键值对，**注意分号后面的空格**

对于集合：

```yaml
NC的任务单:
  - 吃饭 #在YAML中，文本有时候可以不围起来，但您应该围起来。
  - "睡觉"
  - "社保"
```

或

```yaml
NC的任务单: ["吃饭","睡觉","社保"]
```

对于选区:

```YAML
NC女装:
  癖好: XX
  平时穿: XX
NC倾向: 
  玩游戏: XX
```

需要注意的是，选区内的键值对前面都要再**加**上两个空格。

```yaml
A:
  b: xx
  c: 
    d: xx
```

到`d`时，前面已经有四个空格了。

**切忌不要使用TAB**

[对于YAML的格式检查工具](https://www.yamllint.com)

## JSON

文件扩展名为 `json`

整个 JSON 可以理解为一个匿名选区。

```json
{
    "key":"value"
}
```

相比之下比Yaml宽松。JSON不需要换行符，换行符和缩进只是为了美观而加的。因此为了区分开，键值对后面如果不是最后一个需要加一个小逗号

```json
{"key1":"value1","key2":"value2"}
```

对于集合(像是YAML，但是要注意key被双引号包围):

```json
"xx": ["xxx"]
```

对于选区:

```json
{
    "xx":{
        "xxxxxx"： 123,
        "xxx": true,
        "xxxx": "xxxx"
    }
}
```

* 切忌不要忘记逗号。