# 配置文件

配置文件，是程序运行时采用的参数来源。

举一个例子：

>  我有一个让NullCat女装的程序，点击一次他就会自动生产一次女装

女装的方案多种多样。即使我们可以在控制台手动输入方案，但也不能每次开服都来一次。

对于这种情况，便可以使用配置文件指定参数接着让这个程序自动读取。

## 怎么读

配置文件是设计给人类读写的，所以不会太难。

我们一般只会遇到三种配置文件格式：

1. YAML
2. JSON
3. Properties

(排序是常用度降序

但在这之前，我们需要先明确一些概念。

# 键，值，集合，Path，OMG

程序读取配置文件并不会牛逼到自我理解配置文件内容然后自动填参数，要真是这样那就太 :cow: 了

事实上，在配置文件中存在单向一一对应的关系（即键(Key) -> 值(Value)）。这很好理解，举个例子

> 目的：我要读取NC是不是男的
>
> 动作：读取配置文件中的" NC性别 "
>
> 结果：返回 "是"
>
> 读者可以在此思考一下，键值分别是什么。

## 值

键可以只是一串文本，但是值不一样，值可以是别的。

通常，值可以用来描述这些东西：

- 文本 - 用双引号围起来 (xx: "hello world")  *文本有时候没有围起来，您应该围起来。*
> 在文本内如果想表达双引号要怎么办呢?  
> 请在双引号前加上 `\` ，如果想输入 `\` 则是 `\\`  
> 关于这些特殊的操作，下面将会有更加详细的介绍。

- 数字 - 就是数字

- 布尔 - 啥玩意 - 用于描述真或假 - 通常做开关 (NC女装好看吗: true)

  注意：布尔**只有**两个值: `true` 或 `false` ，true是肯定而false是否定

- 集合/List/Array - 用于描述一组相同类型的数据

> **注意:** 配置文件一律使用半角符号(即英文符号)

## Path

假设这里有这样一个配置文件，用于描述NC的女装和身体信息，有两种可能。

1.

```
注意： 该配置文件仅为读者理解用，并不是上文提到的任何一种格式噢
NC女装 {
  癖好: XX
  平时穿: XX
  裙摆: XX
  上衣: XX
  ....
}
NC倾向 {
 玩游戏: XX
 吃什么: XX
}
```

2.

```
NC女装癖好: XX
NC女装平时穿: XX
NC玩游戏倾向：XX
NC倾向吃什么：XX
NC女装裙摆： XX
NC女装上衣： XX
```

看得出来，方法1比方法2要简洁的~~不知道要高到哪里去了~~。

并且，实际上方法 2 可能会非常混乱，想要像是方法 1 一样修改一类数据就更麻烦了。

像是方法 1 中的值，他既不是文本也不是数字..，且长得也像个"子"配置文件..那么我们把它叫做`配置分区`吧，简称`分区/选区`。

那么，~~现在我怎么知道NC女装癖好呢~~如何描述选区内的键位置呢？

我们这样描述: `选区的键名.键名`。这很好理解，还是用上文的示例，接着举例子。

```
NC女装 {
  癖好: XX  (= NC女装.癖好)
  平时穿: XX (= NC女装.平时穿)
  裙摆: XX (= NC女装.裙摆)
  上衣: XX (= NC女装.上衣)
  ....
}
NC倾向 {
 玩游戏: XX (= NC倾向.玩什么)
 吃什么: XX (= NC倾向.吃什么)
}
```
通过这种方法描述的数据位置我们称之为`Path`，中文是`道路,路径`的意思。
### 集合

```
NC的任务单: ["吃饭",“睡觉","社保"]
```

我们想描述一个元素的位置，只需要使用`键名[元素位置]`即可。不过要注意的是，**集合元素位置从0开始哦**。

例如：`NC的任务单[1] = 睡觉`

### 小例题

> 试一试:
>
> A {
>
> B {
>
> ​    C: ["HI"]
>
> }
>
> }
>
> 请尝试描述 HI 的位置

了解了基础概念后，我们只需要记住几种书写格式即可。

## Properties

文件扩展名为 `properties`

Properties非常简单，它使用`Key=Value`的方式指定键值对。

例如 `eula.txt` 中的:

`eula=true` 此时键为eula 值为true

Properties 不能描述复杂的结构，甚至数组。
> 另外，在符号'#'后的内容都将会被忽略掉，这一点和YAML相同

## YAML

文件扩展名为 `yml`

YAML 也很简单，但它对格式非常严格。

他使用`Key: Value`的方式指定键值对，**注意分号后面的空格**

对于集合：

```yaml
NC的任务单:
  - 吃饭 #在YAML中，文本有时候可以不围起来，但您应该围起来。
  # 上文将会读取到 "吃饭" 而并非 "吃饭 #在YAML中，文本有时候可以不围起来，但您应该围起来。"
  - "睡觉"
  - "社保"
```

或

```yaml
NC的任务单: ["吃饭","睡觉","社保"]
```

对于选区:

```YAML
NC女装:
  癖好: XX
  平时穿: XX
NC倾向: 
  玩游戏: XX
```

需要注意的是，选区内的键值对前面都要**再加**上两个空格。

```yaml
A:
  b: xx #这里两个
  c:    #这里也两个，并列
    d: xx #这里是2+2个，不并列，是c下的选区
```

到`d`时，前面已经有四个空格了。

**切忌不要使用 TAB**

[对于YAML的格式检查工具](https://www.yamllint.com)

## JSON

文件扩展名为 `json`

整个 JSON 可以理解为一个匿名选区。

```json
{
    "key":"value"
}
```

相比之下比Yaml宽松。JSON不需要换行符，换行符和缩进只是为了美观而加的。因此为了区分开，**键值对如果不是最后一个**后面就需要加一个小逗号

```json
{"key1":"value1","key2":"value2"}
                ^
```

对于集合(像是YAML，但是要注意key被双引号包围):

```json
"xx": ["xxx"]
```

对于选区:

```json
{
    "xx":{
        "xxxxxx": 123,
        "xxx": true,
        "xxxx": "xxxx"
    }
}
```

* 切忌不要忘记逗号。
* [对于Json的可视化工具](https://tool.lu/json)
* Json 其实不支持注释

## 特殊字符

正如上文提到的，想在 `"..."` 里表示 `"` 而不引发错误需要使用 ` \" `   
这个 `\` 正是`转义字符`，他可以让后面的一个字符和他帖帖，*变成别的意思*  
举例: `"` 对于读配置文件的机器来说，是一个字符，第一个`"`是一串文本的开头，第二个`"`是一个文本的结尾。  
如果碰到了多余的开头和结尾，就会出错。但是如果碰到 `"`前遇到了`\`，则代表他不是什么开头结尾，它就是`"`，*同时会忽略掉前面的`\`*  

### 转义字符不止转原义

> 如果你使用 `\n` 你会发现这是一个...换行符哒！

关于这些内容，读者可以在网络上检索到更多。  
试想一下，要怎么在文本里表达`\n`呢？